{"version":3,"file":"config.js","sourceRoot":"","sources":["../../src/lib/config.ts"],"names":[],"mappings":"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","sourcesContent":["import { IWebcastConfig } from '@/types/client';\r\n\r\n\r\nimport { generateDeviceId, userAgentToDevicePreset } from '@/lib/utilities';\r\nimport { ClientConfiguration } from '@eulerstream/euler-api-sdk';\r\nimport { VERSION } from '@/version';\r\n\r\nexport type LocationPreset = {\r\n    lang: string,\r\n    lang_country: string,\r\n    country: string,\r\n    tz_name: string\r\n}\r\n\r\nexport type DevicePreset = {\r\n    browser_version: string,\r\n    browser_name: string,\r\n    browser_platform: string,\r\n    user_agent: string,\r\n    os: string\r\n}\r\n\r\nexport type ScreenPreset = {\r\n    screen_width: number;\r\n    screen_height: number;\r\n}\r\n\r\n\r\nexport const Locations: LocationPreset[] = [\r\n    {\r\n        'lang_country': 'en-GB',\r\n        'lang': 'en',\r\n        'country': 'GB',\r\n        'tz_name': 'Europe/London'\r\n    },\r\n    {\r\n        'lang_country': 'en-CA',\r\n        'lang': 'en',\r\n        'country': 'CA',\r\n        'tz_name': 'America/Toronto'\r\n    },\r\n    {\r\n        'lang_country': 'en-AU',\r\n        'lang': 'en',\r\n        'country': 'AU',\r\n        'tz_name': 'Australia/Sydney'\r\n    },\r\n    {\r\n        'lang_country': 'en-NZ',\r\n        'lang': 'en',\r\n        'country': 'NZ',\r\n        'tz_name': 'Pacific/Auckland'\r\n    },\r\n    {\r\n        'lang_country': 'en-ZA',\r\n        'lang': 'en',\r\n        'country': 'ZA',\r\n        'tz_name': 'Africa/Johannesburg'\r\n    },\r\n    {\r\n        'lang_country': 'en-IE',\r\n        'lang': 'en',\r\n        'country': 'IE',\r\n        'tz_name': 'Europe/Dublin'\r\n    },\r\n    {\r\n        'lang_country': 'en-JM',\r\n        'lang': 'en',\r\n        'country': 'JM',\r\n        'tz_name': 'America/Jamaica'\r\n    },\r\n    {\r\n        'lang_country': 'en-BZ',\r\n        'lang': 'en',\r\n        'country': 'BZ',\r\n        'tz_name': 'America/Belize'\r\n    },\r\n    {\r\n        'lang_country': 'en-TT',\r\n        'lang': 'en',\r\n        'country': 'TT',\r\n        'tz_name': 'America/Port_of_Spain'\r\n    }\r\n];\r\n\r\n\r\nexport const Screens: ScreenPreset[] = [\r\n    {\r\n        'screen_width': 1920,\r\n        'screen_height': 1080\r\n    },\r\n    {\r\n        'screen_width': 2560,\r\n        'screen_height': 1440\r\n    },\r\n    {\r\n        'screen_width': 3840,\r\n        'screen_height': 2160\r\n    },\r\n    {\r\n        'screen_width': 4096,\r\n        'screen_height': 2160\r\n    },\r\n    {\r\n        'screen_width': 5120,\r\n        'screen_height': 2880\r\n    },\r\n    {\r\n        'screen_width': 7680,\r\n        'screen_height': 4320\r\n    },\r\n    {\r\n        'screen_width': 1152,\r\n        'screen_height': 2048\r\n    },\r\n    {\r\n        'screen_width': 1440,\r\n        'screen_height': 2560\r\n    },\r\n    {\r\n        'screen_width': 2160,\r\n        'screen_height': 3840\r\n    },\r\n    {\r\n        'screen_width': 4320,\r\n        'screen_height': 7680\r\n    }\r\n];\r\n\r\nexport const UserAgents: string[] = [\r\n    // Latest Chrome UA's -> https://www.whatismybrowser.com/guides/the-latest-user-agent/chrome\r\n    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36',\r\n    'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36',\r\n\r\n    // Latest Safari UA's -> https://www.whatismybrowser.com/guides/the-latest-user-agent/safari\r\n    'Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.6 Safari/605.1.15',\r\n\r\n    // Latest Firefox UA's -> https://www.whatismybrowser.com/guides/the-latest-user-agent/firefox\r\n    'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:130.0) Gecko/20100101 Firefox/130.0',\r\n    'Mozilla/5.0 (Macintosh; Intel Mac OS X 14.7; rv:130.0) Gecko/20100101 Firefox/130.0',\r\n\r\n    // Latest Edge UA's -> https://www.whatismybrowser.com/guides/the-latest-user-agent/edge\r\n    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/128.0.2739.79',\r\n    'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/128.0.2739.79',\r\n\r\n    // Latest Opera UA's -> https://www.whatismybrowser.com/guides/the-latest-user-agent/opera\r\n    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 OPR/113.0.0.0',\r\n    'Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 OPR/113.0.0.0'\r\n];\r\n\r\n\r\nexport const Devices: DevicePreset[] = UserAgents.map((userAgent: string) => userAgentToDevicePreset(userAgent));\r\n\r\n// Pick a device\r\nexport const Device: DevicePreset = (process.env.RANDOMIZE_TIKTOK_DEVICE?.toLowerCase() === 'true') ? Devices[Math.floor(Math.random() * Devices.length)] : Devices[6];\r\n\r\n// Pick a location\r\nexport const Location: LocationPreset = (process.env.RANDOMIZE_TIKTOK_LOCATION?.toLowerCase() === 'true') ? Locations[Math.floor(Math.random() * Locations.length)] : {\r\n    lang_country: 'en-DE',\r\n    lang: 'en',\r\n    country: 'DE',\r\n    tz_name: 'Europe/Berlin'\r\n};\r\n\r\nexport const Screen: ScreenPreset = (process.env.RANDOMIZE_TIKTOK_SCREEN?.toLowerCase() === 'true') ? Screens[Math.floor(Math.random() * Screens.length)] : {\r\n    screen_width: 1920,\r\n    screen_height: 1080\r\n};\r\n\r\n\r\nconst Config: IWebcastConfig = {\r\n    TIKTOK_HOST_WEB: 'www.tiktok.com',\r\n    TIKTOK_HOST_WEBCAST: 'webcast.tiktok.com',\r\n    TIKTOK_HTTP_ORIGIN: 'https://www.tiktok.com',\r\n    DEFAULT_HTTP_CLIENT_COOKIES: { 'tt-target-idc': 'useast1a' },\r\n    DEFAULT_HTTP_CLIENT_OPTIONS: {},\r\n    DEFAULT_HTTP_CLIENT_PARAMS: {\r\n        'aid': (1988).toString(),\r\n        'app_language': Location['lang'],\r\n        'app_name': 'tiktok_web',\r\n        'browser_language': Location['lang_country'],\r\n        'browser_name': Device['browser_name'],\r\n        'browser_online': 'true',\r\n        'browser_platform': Device['browser_platform'],\r\n        'browser_version': Device['browser_version'],\r\n        'cookie_enabled': 'true',\r\n        'device_platform': 'web_pc',\r\n        'focus_state': 'true',\r\n        'from_page': 'user',\r\n        'history_len': '10',\r\n        'is_fullscreen': 'false',\r\n        'is_page_visible': 'true',\r\n        'screen_height': Screen['screen_height'].toString(),\r\n        'screen_width': Screen['screen_width'].toString(),\r\n        'tz_name': Location['tz_name'],\r\n        'referer': 'https://www.tiktok.com/',\r\n        'root_referer': 'https://www.tiktok.com/',\r\n        'channel': 'tiktok_web',\r\n        'data_collection_enabled': 'true',\r\n        'os': Device['os'],\r\n        'priority_region': Location['country'],\r\n        'region': Location['country'],\r\n        'user_is_login': 'true',\r\n        'webcast_language': Location['lang'],\r\n        'device_id': generateDeviceId()\r\n    },\r\n    DEFAULT_WS_CLIENT_PARAMS: {\r\n        'version_code': '180800',\r\n        'aid': (1988).toString(),\r\n        'app_language': Location['lang'],\r\n        'app_name': 'tiktok_web',\r\n        'browser_platform': Device['browser_platform'],\r\n        'browser_language': Location['lang_country'],\r\n        'browser_name': Device['browser_name'],\r\n        'browser_version': Device['browser_version'],\r\n        'browser_online': 'true',\r\n        'cookie_enabled': 'true',\r\n        'tz_name': Location['tz_name'],\r\n        'device_platform': 'web',\r\n        'debug': 'false',\r\n        'host': 'https://webcast.tiktok.com',\r\n        'identity': 'audience',\r\n        'live_id': '12',\r\n        'sup_ws_ds_opt': '1',\r\n        'update_version_code': '2.0.0',\r\n        'did_rule': '3',\r\n        'screen_height': (Screen['screen_height']).toString(),\r\n        'screen_width': (Screen['screen_width']).toString(),\r\n        'heartbeat_duration': '0',\r\n        'resp_content_type': 'protobuf',\r\n        'history_comment_count': '6',\r\n        // 'client_enter': '1',\r\n        // We think last_rtt means \"last round trip time\" in millis.\r\n        'last_rtt': ((Math.random() * 100) + 100).toString()\r\n    },\r\n    DEFAULT_WS_CLIENT_PARAMS_APPEND_PARAMETER: '&version_code=270000',\r\n    DEFAULT_HTTP_CLIENT_HEADERS: {\r\n        'Connection': 'keep-alive',\r\n        'Cache-Control': 'max-age=0',\r\n        'User-Agent': Device['user_agent'],\r\n        'Accept': 'text/html,application/json,application/protobuf',\r\n        'Referer': 'https://www.tiktok.com/',\r\n        'Origin': 'https://www.tiktok.com',\r\n        'Accept-Language': 'en-US,en;q=0.9',\r\n        'Accept-Encoding': 'gzip, deflate',\r\n        'Sec-Fetch-Site': 'same-site',\r\n        'Sec-Fetch-Mode': 'cors',\r\n        'Sec-Fetch-Dest': 'empty',\r\n        'Sec-Fetch-Ua-Mobile': '?0'\r\n    },\r\n    DEFAULT_WS_CLIENT_HEADERS: {\r\n        'User-Agent': Device['user_agent']\r\n    }\r\n};\r\n\r\n\r\nexport const SignConfig: Partial<ClientConfiguration> = {\r\n    basePath: process.env.SIGN_API_URL || 'https://tiktok.eulerstream.com',\r\n    apiKey: process.env.SIGN_API_KEY,\r\n    baseOptions: {\r\n        headers: { 'User-Agent': `tiktok-live-connector/${VERSION} ${process.platform}` },\r\n        validateStatus: () => true\r\n    }\r\n};\r\n\r\nexport default Config;\r\n"]}